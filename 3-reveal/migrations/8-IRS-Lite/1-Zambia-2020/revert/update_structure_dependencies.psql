-- Revert reveal_irs_lite_zambia_202020:update_structure_dependencies from pg

BEGIN;

SET search_path TO :"schema",public;

ALTER MATERIALIZED VIEW zambia_irs_lite_jurisdictions SET SCHEMA pending_:schema;
ALTER MATERIALIZED VIEW zambia_irs_lite_operational_areas SET SCHEMA pending_:schema;

ALTER MATERIALIZED VIEW deprecated_:schema .zambia_irs_lite_jurisdictions_v2 SET SCHEMA :"schema";
ALTER MATERIALIZED VIEW deprecated_:schema .zambia_irs_lite_operational_areas_v2 SET SCHEMA :"schema";

ALTER INDEX zambia_irs_lite_jurisdictions_path_idx_gin_v2 RENAME TO zambia_irs_lite_jurisdictions_path_idx_gin;
ALTER INDEX zambia_irs_lite_jurisdictions_plan_idx_v2 RENAME TO zambia_irs_lite_jurisdictions_plan_idx;
ALTER INDEX zambia_irs_lite_jurisdictions_jurisdiction_idx_v2 RENAME TO zambia_irs_lite_jurisdictions_jurisdiction_idx;
ALTER INDEX zambia_irs_lite_jurisdictions_jurisdiction_parent_idx_v2 RENAME TO zambia_irs_lite_jurisdictions_jurisdiction_parent_idx;
ALTER INDEX zambia_irs_lite_jurisdictions_idx_v2 RENAME TO zambia_irs_lite_jurisdictions_idx;

ALTER INDEX zambia_irs_lite_operational_areas_path_idx_gin_v2 RENAME TO zambia_irs_lite_operational_areas_path_idx_gin;
ALTER INDEX zambia_irs_lite_operational_areas_plan_idx_v2 RENAME TO zambia_irs_lite_operational_areas_plan_idx;
ALTER INDEX zambia_irs_lite_operational_areas_jurisdiction_idx_v2 RENAME TO zambia_irs_lite_operational_areas_jurisdiction_idx;
ALTER INDEX zambia_irs_lite_operational_areas_jurisdiction_parent_idx_v2 RENAME TO zambia_irs_lite_operational_areas_jurisdiction_parent_idx;
ALTER INDEX zambia_irs_lite_operational_areas_idx_v2 RENAME TO zambia_irs_lite_operational_areas_idx;

ALTER MATERIALIZED VIEW zambia_irs_lite_jurisdictions_v2 RENAME TO zambia_irs_lite_jurisdictions;
ALTER MATERIALIZED VIEW zambia_irs_lite_operational_areas_v2 RENAME TO zambia_irs_lite_operational_areas;

DROP MATERIALIZED VIEW pending_:schema .zambia_irs_lite_jurisdictions CASCADE;
DROP MATERIALIZED VIEW pending_:schema .zambia_irs_lite_operational_areas CASCADE;

COMMIT;
